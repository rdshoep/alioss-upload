!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=23)}([function(e,t,n){"use strict";function i(){}function a(e){try{return e.then}catch(e){return S=e,v}}function r(e,t){try{return e(t)}catch(e){return S=e,v}}function o(e,t,n){try{e(t,n)}catch(e){return S=e,v}}function l(e){if("object"!==d(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._99=0,this._44=0,this._7=null,this._12=null,e!==i&&h(e,this)}function s(e,t,n){return new e.constructor(function(a,r){var o=new l(i);o.then(a,r),u(e,new y(t,n,o))})}function u(e,t){for(;3===e._44;)e=e._7;if(l._32&&l._32(e),0===e._44)return 0===e._99?(e._99=1,void(e._12=t)):1===e._99?(e._99=2,void(e._12=[e._12,t])):void e._12.push(t);c(e,t)}function c(e,t){g(function(){var n=1===e._44?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._44?f(t.promise,e._7):p(t.promise,e._7));var i=r(n,e._7);i===v?p(t.promise,S):f(t.promise,i)})}function f(e,t){if(t===e)return p(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===(void 0===t?"undefined":d(t))||"function"==typeof t)){var n=a(t);if(n===v)return p(e,S);if(n===e.then&&t instanceof l)return e._44=3,e._7=t,void m(e);if("function"==typeof n)return void h(n.bind(t),e)}e._44=1,e._7=t,m(e)}function p(e,t){e._44=2,e._7=t,l._89&&l._89(e,t),m(e)}function m(e){if(1===e._99&&(u(e,e._12),e._12=null),2===e._99){for(var t=0;t<e._12.length;t++)u(e,e._12[t]);e._12=null}}function y(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1,i=o(e,function(e){n||(n=!0,f(t,e))},function(e){n||(n=!0,p(t,e))});n||i!==v||(n=!0,p(t,S))}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=n(4),S=null,v={};e.exports=l,l._32=null,l._89=null,l._27=i,l.prototype.then=function(e,t){if(this.constructor!==l)return s(this,e,t);var n=new l(i);return u(this,new y(e,t,n)),n}},function(e,t,n){"use strict";e.exports=n(3)},function(e,t,n){"use strict";function i(){if(arguments&&arguments.length>1){for(var e=arguments[0]||{},t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var i in n)e.hasOwnProperty(i)&&e[i]===n[i]||(e[i]=n[i])}return e}return arguments[0]}function a(e,t,n){e=String(e);var i=-1;for(n||0===n||(n=" "),t-=e.length;++i<t;)e=n+e;return e}function r(e,t){return e&&"function"==typeof e?function(){e.apply(this,[null].concat([].slice.apply(arguments))),t.apply(this,arguments)}:t}function o(e,t){return e&&"function"==typeof e?function(){e.apply(this,arguments),t.apply(this,arguments)}:t}function l(e){return e&&e instanceof Function?e:s}function s(){}Object.defineProperty(t,"__esModule",{value:!0}),t.extend=i,t.leftpad=a,t.concatResolve=r,t.concatReject=o,t.resolveFunctoin=l,t.noop=s},function(e,t,n){"use strict";e.exports=n(7)},function(e,t,n){"use strict";(function(t){function n(e){o.length||(r(),l=!0),o[o.length]=e}function i(){for(;s<o.length;){var e=s;if(s+=1,o[e].call(),s>u){for(var t=0,n=o.length-s;t<n;t++)o[t]=o[t+s];o.length-=s,s=0}}o.length=0,s=0,l=!1}function a(e){return function(){function t(){clearTimeout(n),clearInterval(i),e()}var n=setTimeout(t,0),i=setInterval(t,50)}}e.exports=n;var r,o=[],l=!1,s=0,u=1024,c=void 0!==t?t:self,f=c.MutationObserver||c.WebKitMutationObserver;r="function"==typeof f?function(e){var t=1,n=new f(e),i=document.createTextNode("");return n.observe(i,{characterData:!0}),function(){t=-t,i.data=t}}(i):a(i),n.requestFlush=r,n.makeRequestCallFromTimer=a}).call(t,n(8))},function(e,t,n){"use strict";var i,a;"function"==typeof Symbol&&Symbol.iterator;!function(r,o){i=o,void 0!==(a="function"==typeof i?i.call(t,n,t,e):i)&&(e.exports=a)}(0,function(){function e(e){var i=["get","post","put","delete"];return e=e||{},e.baseUrl=e.baseUrl||"",e.method&&e.url?n(e.method,e.baseUrl+e.url,t(e.data),e):i.reduce(function(i,a){return i[a]=function(i,r){return n(a,e.baseUrl+i,t(r),e)},i},{})}function t(e){return e||null}function n(e,t,n,a){var o=["then","catch","always"],s=o.reduce(function(e,t){return e[t]=function(n){return e[t]=n,e},e},{}),u=new XMLHttpRequest;return u.open(e,t,!0),u.withCredentials=a.hasOwnProperty("withCredentials"),i(u,a.headers),u.addEventListener("readystatechange",r(s,u),!1),u.send(l(n)),s.abort=function(){return u.abort()},s}function i(e,t){t=t||{},a(t)||(t["Content-Type"]="application/x-www-form-urlencoded"),Object.keys(t).forEach(function(n){t[n]&&e.setRequestHeader(n,t[n])})}function a(e){return Object.keys(e).some(function(e){return"content-type"===e.toLowerCase()})}function r(e,t){return function n(){t.readyState===t.DONE&&(t.removeEventListener("readystatechange",n,!1),e.always.apply(e,o(t)),t.status>=200&&t.status<300?e.then.apply(e,o(t)):e.catch.apply(e,o(t)))}}function o(e){var t;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}return[t,e]}function l(e){return s(e)?u(e):e}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e){return Object.keys(e).reduce(function(t,n){return(t?t+"&":"")+c(n)+"="+c(e[n])},"")}function c(e){return encodeURIComponent(e)}return e})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return e.getFullYear()+"/"+(0,u.leftpad)(e.getMonth()+1,2,"0")+"/"+(0,u.leftpad)(e.getDate(),2,"0")+"/"+(0,u.leftpad)(e.getHours(),2,"0")}function o(e){e=e||{};var t=new Date,n=e.prefix||r(t),i=e.suffix||"",a=(0,u.leftpad)(Math.round(99999*Math.random()),5,0);return n+t.getTime()+"_"+a+i}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(2),c=n(1),f=i(c),p=n(15),m=i(p),y=n(16),h=i(y),d="alioss",g=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;a(this,e),this.client=t,this.options=n||{},this.engine=i,this.token=new m.default(this.options.token||this.options.auth)}return s(e,[{key:"verify",value:function(){var e=this;return f.default.resolve(e.token).then(function(t){return t.isValid()?t:t.authorize({"x-upload-client":e.client.name(),"x-upload-engine":e.engine}).then(function(t){e.client.init(Object.assign(e.options,{token:t}))})})}},{key:"upload",value:function(e,t,n){var i=this;return this.verify().then(function(){return i._upload(e,t,n)}).catch(function(e){return console.log(e)})}},{key:"_upload",value:function(e,t,n){t&&"object"==(void 0===t?"undefined":l(t))&&(n=n||t,t=void 0);var i=n||{};if(t&&"string"==typeof t)t=t.toString();else if(t&&t instanceof Function)t=t();else if(e instanceof File&&!i.suffix){var a=e.name;i.suffix=a.substr(a.lastIndexOf(".")),t=o(n)}else t=o(n);var r=(0,u.resolveFunctoin)(i.error);if(!e){var s="file content can not be empty!";return r(t,s),f.default.reject(s)}return i.token=this.token.token,new h.default(this,this.client,e,Object.assign(i,{name:t})).start()}}]),e}();t.default=g},function(e,t,n){"use strict";e.exports=n(0),n(9),n(10),n(11),n(12),n(14)},function(e,t,n){"use strict";var i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":a(window))&&(i=window)}e.exports=i},function(e,t,n){"use strict";var i=n(0);e.exports=i,i.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,n){"use strict";var i=n(0);e.exports=i,i.prototype.finally=function(e){return this.then(function(t){return i.resolve(e()).then(function(){return t})},function(t){return i.resolve(e()).then(function(){throw t})})}},function(e,t,n){"use strict";function i(e){var t=new r(r._27);return t._44=1,t._7=e,t}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(0);e.exports=r;var o=i(!0),l=i(!1),s=i(null),u=i(void 0),c=i(0),f=i("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return s;if(void 0===e)return u;if(!0===e)return o;if(!1===e)return l;if(0===e)return c;if(""===e)return f;if("object"===(void 0===e?"undefined":a(e))||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new r(t.bind(e))}catch(e){return new r(function(t,n){n(e)})}return i(e)},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){function i(l,s){if(s&&("object"===(void 0===s?"undefined":a(s))||"function"==typeof s)){if(s instanceof r&&s.then===r.prototype.then){for(;3===s._44;)s=s._7;return 1===s._44?i(l,s._7):(2===s._44&&n(s._7),void s.then(function(e){i(l,e)},n))}var u=s.then;if("function"==typeof u){return void new r(u.bind(s)).then(function(e){i(l,e)},n)}}t[l]=s,0==--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,l=0;l<t.length;l++)i(l,t[l])})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.forEach(function(e){r.resolve(e).then(t,n)})})},r.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";function i(e,t){for(var n=[],i=0;i<t;i++)n.push("a"+i);var a=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([l]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],a)(r,e)}function a(e){for(var t=Math.max(e.length-1,3),n=[],i=0;i<t;i++)n.push("a"+i);var a=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+l+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],a)(r,e)}var r=n(0),o=n(13);e.exports=r,r.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?i(e,t):a(e)};var l="function (err, res) {if (err) { rj(err); } else { rs(res); }}";r.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,i=this;try{return e.apply(this,arguments).nodeify(n,i)}catch(e){if(null===n||void 0===n)return new r(function(t,n){n(e)});o(function(){n.call(i,e)})}}},r.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(n){o(function(){e.call(t,null,n)})},function(n){o(function(){e.call(t,n)})})}},function(e,t,n){"use strict";function i(){if(s.length)throw s.shift()}function a(e){var t;t=l.length?l.pop():new r,t.task=e,o(t)}function r(){this.task=null}var o=n(4),l=[],s=[],u=o.makeRequestCallFromTimer(i);e.exports=a,r.prototype.call=function(){try{this.task.call()}catch(e){a.onerror?a.onerror(e):(s.push(e),u())}finally{this.task=null,l[l.length]=this}}},function(e,t,n){"use strict";var i=n(0);e.exports=i,i.enableSynchronous=function(){i.prototype.isPending=function(){return 0==this.getState()},i.prototype.isFulfilled=function(){return 1==this.getState()},i.prototype.isRejected=function(){return 2==this.getState()},i.prototype.getValue=function(){if(3===this._44)return this._7.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._7},i.prototype.getReason=function(){if(3===this._44)return this._7.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._7},i.prototype.getState=function(){return 3===this._44?this._7.getState():-1===this._44||-2===this._44?0:this._44}},i.disableSynchronous=function(){i.prototype.isPending=void 0,i.prototype.isFulfilled=void 0,i.prototype.isRejected=void 0,i.prototype.getValue=void 0,i.prototype.getReason=void 0,i.prototype.getState=void 0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t=e.Expiration||e.expiration;if(!t){var n=e.expiresIn||e.expires_in;n&&(t=Date.now()+Number(n))}return t=t||Date.now()+864e5,new Date(t).getTime()}function o(e,t,n){n=(0,f.resolveFunctoin)(n),(0,c.default)({headers:t}).get(e).then(function(e,t){e&&"object"==(void 0===e?"undefined":s(e))?n(void 0,e):n("request to sts server error: ("+t.status+")"+t.responseText)}).catch(function(e,t){n("request to sts server error: ("+t.status+")"+t.responseText)})}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(5),c=i(u),f=n(2),p=n(1),m=i(p),y=function(){function e(t){if(a(this,e),"string"==typeof t)this.authUrl=t;else{if("object"!==(void 0===t?"undefined":s(t)))throw new Error("invalid token setting(Accepts: string/object)");this.token=t,this.expiration=r(this.token)}}return l(e,[{key:"isValid",value:function(){return Date.now()<this.expiration}},{key:"authorize",value:function(e){var t=this;return new m.default(function(n,i){o(t.authUrl,e,function(e,t){e?i(e):n(t)})}).then(function(e){return t.token=e,t.expiration=r(e),e})}}]),e}();t.default=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(t,n,a,r){i(this,e),this.uploader=t,this.client=n,this.data=a,this.option=r}return a(e,[{key:"start",value:function(){var e=this;return(this.uploader.options.middlewares||[]).reduce(function(t,n){return t.then(function(){return n(e)})},o.default.resolve(this)).then(function(){return e.upload()})}},{key:"upload",value:function(){var e=this.option.name;return this.client.upload(this.data,e,this.option)}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var n=void 0;return t&&(t.style&&"string"==typeof t.style&&(n="@!"+t.style),t.config&&"string"==typeof t.config&&(n="@"+t.config)),e&&n?e+n:e}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),s=n(5),u=(i(s),n(1)),c=i(u),f=function(){function e(t){a(this,e),this.options=t||{}}return o(e,[{key:"name",value:function(){return"alioss"}},{key:"init",value:function(e){var t=(0,l.extend)({},this.options,e),n=t.token,i=void 0;n&&(i={region:n.region,accessKeyId:n.AccessKeyId,accessKeySecret:n.AccessKeySecret,stsToken:n.SecurityToken,bucket:n.bucket,static:n.static}),this._initClient((0,l.extend)({},t,i))}},{key:"_initClient",value:function(e){this.options=(0,l.extend)({},this.options,e),this.client=new OSS.Wrapper({region:e.region,accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,stsToken:e.stsToken,bucket:e.bucket}),e.static?this.domain=e.static:this.domain="http://"+e.bucket+"."+e.region+".aliyuncs.com/"}},{key:"verify",value:function(){return c.default.resolve(this).then(function(e){if(!e.options.token)return c.default.reject("AliossFileUpload Client without token node, you need use init method to config.")})}},{key:"_uploadImpl",value:function(e,t,n,i){return n=n||"file","file"==n?(console.log(t,e,i),this.client.multipartUpload(t,e,i)):"buffer"==n?(console.log(t,e,i,OSS.Buffer),this.client.put(t,new OSS.Buffer(e))):c.default.reject("unsupported upload data type:"+n)}},{key:"upload",value:function(e,t,n){var i=n||{},a=(0,l.resolveFunctoin)(i.before),o=(0,l.resolveFunctoin)(i.success),s=(0,l.resolveFunctoin)(i.error),u=(0,l.resolveFunctoin)(i.progress),f=this,p=i.type||"file";return e?this.verify().then(function(){return a(t),console.log("begin upload"),f._uploadImpl(e,t,p,{progress:function(e){return function(n){console.log("upload progress: %s",e),u(t,e),n()}}})}).then(function(e){return console.log("upload success: %j",e),e.url=r(f.domain+e.name,i),o(t,e),e}).catch(function(e){return console.log("upload error: %j",e),s(t,e),c.default.reject(e)}):new c.default(function(e,n){s(t,"file content can not be empty!"),n(err)})}}]),e}();t.default=f},,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t=e.data,n=e.option;if(t instanceof File&&n.imageCompress)return(0,p.default)(t,Object.assign({output:"buffer"},n.imageCompress)).then(function(t){n.type="buffer",e.data=t,e.option=n}).catch(function(e){console.warn("image compress error",e)})}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(6),s=i(l),u=n(17),c=i(u),f=n(24),p=i(f),m=function(){function e(t){a(this,e);var n=new c.default;this.fileUploader=new s.default(n,Object.assign({},t,{middlewares:[r]}))}return o(e,[{key:"upload",value:function(e,t,n){return this.fileUploader.upload(e,t,n)}}]),e}();window.Uploader=window.FileUpload=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if("string"==typeof e&&(e=document.getElementById(e)),!e)throw new TypeError("ImageObject muse be ImageElement/Id/ImageFile");t=t||{},this.element=e,this.option={output:"base64"},this.option.quality=t.quality||100,this.option.outputImageType="image/jpeg";var n=t.outputImageType;void 0===n||"png"!=n&&"image/png"!=n||(this.option.outputImageType="image/png"),this.option.exif=!1!==t.exif,this.option.maxWidth=Number(t.maxWidth)||0,this.option.maxHeight=Number(t.maxHeight)||0,this.option.maxSize=t.maxSize,void 0!==this.option.maxSize||this.option.maxWidth>0||this.option.maxHeight>0||(this.option.maxSize=!0),"buffer"==t.output&&(this.option.output=t.output)}function r(e,t){var n=e.element;if(n&&n instanceof File){var i=n.size;return console.log("fileSize",i),i>5242880?g.default.reject("文件超过大小限制(5M)，当前大小为"+Math.round(i/1024/1024)+"M"):(e.file=n,new g.default(function(t,i){h(n,function(n,a){n&&i(n),e.element=a,e.data=a.src,t()})}).then(t))}return t()}function o(e,t){var n=e.option,i=n.maxSize,a=n.maxHeight,r=n.maxWidth,o=n.outputImageType,l=u(i,r,a,C,o),s=e.element,f=s.naturalWidth,p=s.naturalHeight,m=c(f,p,l,r,a);return m>1&&(f/=m,p/=m,e.compress={width:f,height:p,imageType:n.outputImageType}),t()}function l(e,t){var n=e.data;if(e.option.exif&&e.compress){var i=void 0;try{i=v.default.load(n)}catch(e){console.error("load exif from image error",e,n)}return t().then(function(){var t=e.data;try{t&&i&&(i.thumbnail=null,e.data=v.default.insert(v.default.dump(i),t))}catch(e){console.error("insert exif to image error",e,t,i)}})}return t()}function s(e,t){var n=e.option,i=e.compress;if(i){var a=e.element,r=i.width,o=i.height,l=i.imageType,s=document.createElement("canvas"),u=s.getContext("2d");s.width=r,s.height=o,"image/jpeg"==l&&(s.fillStyle=n.backgroundColor||"#fff");var c=n.quality;return u.fillRect(0,0,r,o),u.drawImage(a,0,0,r,o),e.data=s.toDataURL(l,c/100),s.width=s.height=0,t()}}function u(e,t,n,i,a){var r=a||"image/jpeg",o=3;"image/png"==r&&(o=4);var l=i||C;return!1===e?l=0:parseInt(e)>0&&(l=Math.floor(parseInt(e)/o)),t>0&&n>0&&(l=Math.min(l,t*n)),l}function c(e,t,n,i,a){var r=1,o=1,l=1;return n>0&&(r=e*t/n)>1&&(r=Math.sqrt(r)),i>0&&e>i&&(o=e/i),a>0&&t>a&&(l=t/a),Math.max(r,o,l)}function f(e,t){var n=e.option;return"buffer"==n.output?t().then(function(){var t=p(e.data,n.outputImageType);return e.data=y(m(atob(t))),g.default.resolve()}):t()}function p(e,t){return e.replace(/^data:[\w\\\/]+;base64,/,"")}function m(e){return Array.prototype.map.call(e,function(e){return 255&e.charCodeAt(0)})}function y(e){return new Uint8Array(e).buffer}function h(e,t){if(t=t||new Function,e&&e instanceof File){var n=new FileReader;n.onload=function(){var e=this.result,n=new Image;n.src=e,n.complete?t(null,n):n.onload=function(){t(null,n)}},n.readAsDataURL(e)}else t("unexpect file type")}Object.defineProperty(t,"__esModule",{value:!0});var d=n(3),g=i(d),S=n(25),v=i(S),P=n(26),b=i(P),C=3e5;t.default=function(){var e=(0,b.default)([r,o,f,l,s]);return function(t,n){try{var i=new a(t,n);return e(i).then(function(){return g.default.resolve(i.data)})}catch(e){return g.default.reject(e)}}}()},function(e,t,n){"use strict";!function(){function n(e){return JSON.parse(JSON.stringify(e))}function i(e){for(var t=m(e);"ÿà"<=t[1].slice(0,2)&&t[1].slice(0,2)<="ÿï";)t=[t[0]].concat(t.slice(2));return t.join("")}function a(e){return c(">"+p("B",e.length),e)}function r(e){return c(">"+p("H",e.length),e)}function o(e){return c(">"+p("L",e.length),e)}function l(e,t,n){var i,l,s,u,f="",m="";if("Byte"==t)i=e.length,i<=4?m=a(e)+p("\0",4-i):(m=c(">L",[n]),f=a(e));else if("Short"==t)i=e.length,i<=2?m=r(e)+p("\0\0",2-i):(m=c(">L",[n]),f=r(e));else if("Long"==t)i=e.length,i<=1?m=o(e):(m=c(">L",[n]),f=o(e));else if("Ascii"==t)l=e+"\0",i=l.length,i>4?(m=c(">L",[n]),f=l):m=l+p("\0",4-i);else if("Rational"==t){if("number"==typeof e[0])i=1,s=e[0],u=e[1],l=c(">L",[s])+c(">L",[u]);else{i=e.length,l="";for(var y=0;y<i;y++)s=e[y][0],u=e[y][1],l+=c(">L",[s])+c(">L",[u])}m=c(">L",[n]),f=l}else if("SRational"==t){if("number"==typeof e[0])i=1,s=e[0],u=e[1],l=c(">l",[s])+c(">l",[u]);else{i=e.length,l="";for(var y=0;y<i;y++)s=e[y][0],u=e[y][1],l+=c(">l",[s])+c(">l",[u])}m=c(">L",[n]),f=l}else"Undefined"==t&&(i=e.length,i>4?(m=c(">L",[n]),f=e):m=e+p("\0",4-i));return[c(">L",[i]),m,f]}function s(e,t,n){var i,a=Object.keys(e).length,r=c(">H",[a]);i=["0th","1st"].indexOf(t)>-1?2+12*a+4:2+12*a;var o,s="",u="";for(var o in e)if("string"==typeof o&&(o=parseInt(o)),!("0th"==t&&[34665,34853].indexOf(o)>-1||"Exif"==t&&40965==o||"1st"==t&&[513,514].indexOf(o)>-1)){var f=e[o],p=c(">H",[o]),m=P[t][o].type,y=c(">H",[v[m]]);"number"==typeof f&&(f=[f]);var h=8+i+n+u.length,d=l(f,m,h),g=d[0],S=d[1],b=d[2];s+=p+y+g+S,u+=b}return[r+s,u]}function u(e){var t,n;if("ÿØ"==e.slice(0,2))t=m(e),n=y(t),this.tiftag=n?n.slice(10):null;else if(["II","MM"].indexOf(e.slice(0,2))>-1)this.tiftag=e;else{if("Exif"!=e.slice(0,4))throw"Given file is neither JPEG nor TIFF.";this.tiftag=e.slice(6)}}function c(e,t){if(!(t instanceof Array))throw"'pack' error. Got invalid type argument.";if(e.length-1!=t.length)throw"'pack' error. "+(e.length-1)+" marks, "+t.length+" elements.";var n;if("<"==e[0])n=!0;else{if(">"!=e[0])throw"";n=!1}for(var i="",a=1,r=null,o=null,l=null;o=e[a];){if("b"==o.toLowerCase()){if(r=t[a-1],"b"==o&&r<0&&(r+=256),r>255||r<0)throw"'pack' error.";l=String.fromCharCode(r)}else if("H"==o){if((r=t[a-1])>65535||r<0)throw"'pack' error.";l=String.fromCharCode(Math.floor(r%65536/256))+String.fromCharCode(r%256),n&&(l=l.split("").reverse().join(""))}else{if("l"!=o.toLowerCase())throw"'pack' error.";if(r=t[a-1],"l"==o&&r<0&&(r+=4294967296),r>4294967295||r<0)throw"'pack' error.";l=String.fromCharCode(Math.floor(r/16777216))+String.fromCharCode(Math.floor(r%16777216/65536))+String.fromCharCode(Math.floor(r%65536/256))+String.fromCharCode(r%256),n&&(l=l.split("").reverse().join(""))}i+=l,a+=1}return i}function f(e,t){if("string"!=typeof t)throw"'unpack' error. Got invalid type argument.";for(var n=0,i=1;i<e.length;i++)if("b"==e[i].toLowerCase())n+=1;else if("h"==e[i].toLowerCase())n+=2;else{if("l"!=e[i].toLowerCase())throw"'unpack' error. Got invalid mark.";n+=4}if(n!=t.length)throw"'unpack' error. Mismatch between symbol and string length. "+n+":"+t.length;var a;if("<"==e[0])a=!0;else{if(">"!=e[0])throw"'unpack' error.";a=!1}for(var r=[],o=0,l=1,s=null,u=null,c=null,f="";u=e[l];){if("b"==u.toLowerCase())c=1,f=t.slice(o,o+c),s=f.charCodeAt(0),"b"==u&&s>=128&&(s-=256);else if("H"==u)c=2,f=t.slice(o,o+c),a&&(f=f.split("").reverse().join("")),s=256*f.charCodeAt(0)+f.charCodeAt(1);else{if("l"!=u.toLowerCase())throw"'unpack' error. "+u;c=4,f=t.slice(o,o+c),a&&(f=f.split("").reverse().join("")),s=16777216*f.charCodeAt(0)+65536*f.charCodeAt(1)+256*f.charCodeAt(2)+f.charCodeAt(3),"l"==u&&s>=2147483648&&(s-=4294967296)}r.push(s),o+=c,l+=1}return r}function p(e,t){for(var n="",i=0;i<t;i++)n+=e;return n}function m(e){if("ÿØ"!=e.slice(0,2))throw"Given data isn't JPEG.";for(var t=2,n=["ÿØ"];;){if("ÿÚ"==e.slice(t,t+2)){n.push(e.slice(t));break}var i=f(">H",e.slice(t+2,t+4))[0],a=t+i+2;if(n.push(e.slice(t,a)),(t=a)>=e.length)throw"Wrong JPEG data."}return n}function y(e){for(var t,n=0;n<e.length;n++)if(t=e[n],"ÿá"==t.slice(0,2)&&"Exif\0\0"==t.slice(4,10))return t;return null}function h(e,t){return"ÿà"==e[1].slice(0,2)&&"ÿá"==e[2].slice(0,2)&&"Exif\0\0"==e[2].slice(4,10)?t?(e[2]=t,e=["ÿØ"].concat(e.slice(2))):e=null==t?e.slice(0,2).concat(e.slice(3)):e.slice(0).concat(e.slice(2)):"ÿà"==e[1].slice(0,2)?t&&(e[1]=t):"ÿá"==e[1].slice(0,2)&&"Exif\0\0"==e[1].slice(4,10)?t?e[1]=t:null==t&&(e=e.slice(0).concat(e.slice(2))):t&&(e=[e[0],t].concat(e.slice(1))),e.join("")}var d={};if(d.version="1.03",d.remove=function(e){var t=!1;if("ÿØ"==e.slice(0,2));else{if("data:image/jpeg;base64,"!=e.slice(0,23)&&"data:image/jpg;base64,"!=e.slice(0,22))throw"Given data is not jpeg.";e=S(e.split(",")[1]),t=!0}var n=m(e);if("ÿá"==n[1].slice(0,2)&&"Exif\0\0"==n[1].slice(4,10))n=[n[0]].concat(n.slice(2));else{if("ÿá"!=n[2].slice(0,2)||"Exif\0\0"!=n[2].slice(4,10))throw"Exif not found.";n=n.slice(0,2).concat(n.slice(3))}var i=n.join("");return t&&(i="data:image/jpeg;base64,"+g(i)),i},d.insert=function(e,t){var n=!1;if("Exif\0\0"!=e.slice(0,6))throw"Given data is not exif.";if("ÿØ"==t.slice(0,2));else{if("data:image/jpeg;base64,"!=t.slice(0,23)&&"data:image/jpg;base64,"!=t.slice(0,22))throw"Given data is not jpeg.";t=S(t.split(",")[1]),n=!0}var i="ÿá"+c(">H",[e.length+2])+e,a=m(t),r=h(a,i);return n&&(r="data:image/jpeg;base64,"+g(r)),r},d.load=function(e){var t;if("string"!=typeof e)throw"'load' gots invalid type argument.";if("ÿØ"==e.slice(0,2))t=e;else if("data:image/jpeg;base64,"==e.slice(0,23)||"data:image/jpg;base64,"==e.slice(0,22))t=S(e.split(",")[1]);else{if("Exif"!=e.slice(0,4))throw"'load' gots invalid file data.";t=e.slice(6)}var n={"0th":{},Exif:{},GPS:{},Interop:{},"1st":{},thumbnail:null},i=new u(t);if(null===i.tiftag)return n;"II"==i.tiftag.slice(0,2)?i.endian_mark="<":i.endian_mark=">";var a=f(i.endian_mark+"L",i.tiftag.slice(4,8))[0];n["0th"]=i.get_ifd(a,"0th");var r=n["0th"].first_ifd_pointer;if(delete n["0th"].first_ifd_pointer,34665 in n["0th"]&&(a=n["0th"][34665],n.Exif=i.get_ifd(a,"Exif")),34853 in n["0th"]&&(a=n["0th"][34853],n.GPS=i.get_ifd(a,"GPS")),40965 in n.Exif&&(a=n.Exif[40965],n.Interop=i.get_ifd(a,"Interop")),"\0\0\0\0"!=r&&(a=f(i.endian_mark+"L",r)[0],n["1st"]=i.get_ifd(a,"1st"),513 in n["1st"]&&514 in n["1st"])){var o=n["1st"][513]+n["1st"][514],l=i.tiftag.slice(n["1st"][513],o);n.thumbnail=l}return n},d.dump=function(e){var t,a,r,o,l,u=n(e),f=!1,p=!1,m=!1,y=!1;t="0th"in u?u["0th"]:{},"Exif"in u&&Object.keys(u.Exif).length||"Interop"in u&&Object.keys(u.Interop).length?(t[34665]=1,f=!0,a=u.Exif,"Interop"in u&&Object.keys(u.Interop).length?(a[40965]=1,m=!0,r=u.Interop):Object.keys(a).indexOf(d.ExifIFD.InteroperabilityTag.toString())>-1&&delete a[40965]):Object.keys(t).indexOf(d.ImageIFD.ExifTag.toString())>-1&&delete t[34665],"GPS"in u&&Object.keys(u.GPS).length?(t[d.ImageIFD.GPSTag]=1,p=!0,o=u.GPS):Object.keys(t).indexOf(d.ImageIFD.GPSTag.toString())>-1&&delete t[d.ImageIFD.GPSTag],"1st"in u&&"thumbnail"in u&&null!=u.thumbnail&&(y=!0,u["1st"][513]=1,u["1st"][514]=1,l=u["1st"]);var h,g,S,P,b,C=s(t,"0th",0),R=C[0].length+12*f+12*p+4+C[1].length,w="",L=0,x="",I=0,k="",A=0,D="";if(f&&(h=s(a,"Exif",R),L=h[0].length+12*m+h[1].length),p&&(g=s(o,"GPS",R+L),x=g.join(""),I=x.length),m){var _=R+L+I;S=s(r,"Interop",_),k=S.join(""),A=k.length}if(y){var _=R+L+I+A;if(P=s(l,"1st",_),b=i(u.thumbnail),b.length>64e3)throw"Given thumbnail is too large. max 64kB"}var T="",G="",F="",M="\0\0\0\0";if(f){var E=8+R,O=c(">L",[E]),j=34665,B=c(">H",[j]),U=c(">H",[v.Long]),N=c(">L",[1]);T=B+U+N+O}if(p){var E=8+R+L,O=c(">L",[E]),j=34853,B=c(">H",[j]),U=c(">H",[v.Long]),N=c(">L",[1]);G=B+U+N+O}if(m){var E=8+R+L+I,O=c(">L",[E]),j=40965,B=c(">H",[j]),U=c(">H",[v.Long]),N=c(">L",[1]);F=B+U+N+O}if(y){var E=8+R+L+I+A;M=c(">L",[E]);var H=E+P[0].length+24+4+P[1].length,V="\0\0\0\0"+c(">L",[H]),z="\0\0\0\0"+c(">L",[b.length]);D=P[0]+V+z+"\0\0\0\0"+P[1]+b}var J=C[0]+T+G+M+C[1];return f&&(w=h[0]+F+h[1]),"Exif\0\0MM\0*\0\0\0\b"+J+w+x+k+D},u.prototype={get_ifd:function(e,t){var n,i={},a=f(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],r=e+2;n=["0th","1st"].indexOf(t)>-1?"Image":t;for(var o=0;o<a;o++){e=r+12*o;var l=f(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],s=f(this.endian_mark+"H",this.tiftag.slice(e+2,e+4))[0],u=f(this.endian_mark+"L",this.tiftag.slice(e+4,e+8))[0],c=this.tiftag.slice(e+8,e+12),p=[s,u,c];l in P[n]&&(i[l]=this.convert_value(p))}return"0th"==t&&(e=r+12*a,i.first_ifd_pointer=this.tiftag.slice(e,e+4)),i},convert_value:function(e){var t,n=null,i=e[0],a=e[1],r=e[2];if(1==i)a>4?(t=f(this.endian_mark+"L",r)[0],n=f(this.endian_mark+p("B",a),this.tiftag.slice(t,t+a))):n=f(this.endian_mark+p("B",a),r.slice(0,a));else if(2==i)a>4?(t=f(this.endian_mark+"L",r)[0],n=this.tiftag.slice(t,t+a-1)):n=r.slice(0,a-1);else if(3==i)a>2?(t=f(this.endian_mark+"L",r)[0],n=f(this.endian_mark+p("H",a),this.tiftag.slice(t,t+2*a))):n=f(this.endian_mark+p("H",a),r.slice(0,2*a));else if(4==i)a>1?(t=f(this.endian_mark+"L",r)[0],n=f(this.endian_mark+p("L",a),this.tiftag.slice(t,t+4*a))):n=f(this.endian_mark+p("L",a),r);else if(5==i)if(t=f(this.endian_mark+"L",r)[0],a>1){n=[];for(var o=0;o<a;o++)n.push([f(this.endian_mark+"L",this.tiftag.slice(t+8*o,t+4+8*o))[0],f(this.endian_mark+"L",this.tiftag.slice(t+4+8*o,t+8+8*o))[0]])}else n=[f(this.endian_mark+"L",this.tiftag.slice(t,t+4))[0],f(this.endian_mark+"L",this.tiftag.slice(t+4,t+8))[0]];else if(7==i)a>4?(t=f(this.endian_mark+"L",r)[0],n=this.tiftag.slice(t,t+a)):n=r.slice(0,a);else{if(10!=i)throw"Exif might be wrong. Got incorrect value type to decode. type:"+i;if(t=f(this.endian_mark+"L",r)[0],a>1){n=[];for(var o=0;o<a;o++)n.push([f(this.endian_mark+"l",this.tiftag.slice(t+8*o,t+4+8*o))[0],f(this.endian_mark+"l",this.tiftag.slice(t+4+8*o,t+8+8*o))[0]])}else n=[f(this.endian_mark+"l",this.tiftag.slice(t,t+4))[0],f(this.endian_mark+"l",this.tiftag.slice(t+4,t+8))[0]]}return n instanceof Array&&1==n.length?n[0]:n}},void 0===g)var g=function(e){for(var t,n,i,a,r,o,l,s="",u=0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";u<e.length;)t=e.charCodeAt(u++),n=e.charCodeAt(u++),i=e.charCodeAt(u++),a=t>>2,r=(3&t)<<4|n>>4,o=(15&n)<<2|i>>6,l=63&i,isNaN(n)?o=l=64:isNaN(i)&&(l=64),s=s+c.charAt(a)+c.charAt(r)+c.charAt(o)+c.charAt(l);return s};if(void 0===S)var S=function(e){var t,n,i,a,r,o,l,s="",u=0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)a=c.indexOf(e.charAt(u++)),r=c.indexOf(e.charAt(u++)),o=c.indexOf(e.charAt(u++)),l=c.indexOf(e.charAt(u++)),t=a<<2|r>>4,n=(15&r)<<4|o>>2,i=(3&o)<<6|l,s+=String.fromCharCode(t),64!=o&&(s+=String.fromCharCode(n)),64!=l&&(s+=String.fromCharCode(i));return s};var v={Byte:1,Ascii:2,Short:3,Long:4,Rational:5,Undefined:7,SLong:9,SRational:10},P={Image:{11:{name:"ProcessingSoftware",type:"Ascii"},254:{name:"NewSubfileType",type:"Long"},255:{name:"SubfileType",type:"Short"},256:{name:"ImageWidth",type:"Long"},257:{name:"ImageLength",type:"Long"},258:{name:"BitsPerSample",type:"Short"},259:{name:"Compression",type:"Short"},262:{name:"PhotometricInterpretation",type:"Short"},263:{name:"Threshholding",type:"Short"},264:{name:"CellWidth",type:"Short"},265:{name:"CellLength",type:"Short"},266:{name:"FillOrder",type:"Short"},269:{name:"DocumentName",type:"Ascii"},270:{name:"ImageDescription",type:"Ascii"},271:{name:"Make",type:"Ascii"},272:{name:"Model",type:"Ascii"},273:{name:"StripOffsets",type:"Long"},274:{name:"Orientation",type:"Short"},277:{name:"SamplesPerPixel",type:"Short"},278:{name:"RowsPerStrip",type:"Long"},279:{name:"StripByteCounts",type:"Long"},282:{name:"XResolution",type:"Rational"},283:{name:"YResolution",type:"Rational"},284:{name:"PlanarConfiguration",type:"Short"},290:{name:"GrayResponseUnit",type:"Short"},291:{name:"GrayResponseCurve",type:"Short"},292:{name:"T4Options",type:"Long"},293:{name:"T6Options",type:"Long"},296:{name:"ResolutionUnit",type:"Short"},301:{name:"TransferFunction",type:"Short"},305:{name:"Software",type:"Ascii"},306:{name:"DateTime",type:"Ascii"},315:{name:"Artist",type:"Ascii"},316:{name:"HostComputer",type:"Ascii"},317:{name:"Predictor",type:"Short"},318:{name:"WhitePoint",type:"Rational"},319:{name:"PrimaryChromaticities",type:"Rational"},320:{name:"ColorMap",type:"Short"},321:{name:"HalftoneHints",type:"Short"},322:{name:"TileWidth",type:"Short"},323:{name:"TileLength",type:"Short"},324:{name:"TileOffsets",type:"Short"},325:{name:"TileByteCounts",type:"Short"},330:{name:"SubIFDs",type:"Long"},332:{name:"InkSet",type:"Short"},333:{name:"InkNames",type:"Ascii"},334:{name:"NumberOfInks",type:"Short"},336:{name:"DotRange",type:"Byte"},337:{name:"TargetPrinter",type:"Ascii"},338:{name:"ExtraSamples",type:"Short"},339:{name:"SampleFormat",type:"Short"},340:{name:"SMinSampleValue",type:"Short"},341:{name:"SMaxSampleValue",type:"Short"},342:{name:"TransferRange",type:"Short"},343:{name:"ClipPath",type:"Byte"},344:{name:"XClipPathUnits",type:"Long"},345:{name:"YClipPathUnits",type:"Long"},346:{name:"Indexed",type:"Short"},347:{name:"JPEGTables",type:"Undefined"},351:{name:"OPIProxy",type:"Short"},512:{name:"JPEGProc",type:"Long"},513:{name:"JPEGInterchangeFormat",type:"Long"},514:{name:"JPEGInterchangeFormatLength",type:"Long"},515:{name:"JPEGRestartInterval",type:"Short"},517:{name:"JPEGLosslessPredictors",type:"Short"},518:{name:"JPEGPointTransforms",type:"Short"},519:{name:"JPEGQTables",type:"Long"},520:{name:"JPEGDCTables",type:"Long"},521:{name:"JPEGACTables",type:"Long"},529:{name:"YCbCrCoefficients",type:"Rational"},530:{name:"YCbCrSubSampling",type:"Short"},531:{name:"YCbCrPositioning",type:"Short"},532:{name:"ReferenceBlackWhite",type:"Rational"},700:{name:"XMLPacket",type:"Byte"},18246:{name:"Rating",type:"Short"},18249:{name:"RatingPercent",type:"Short"},32781:{name:"ImageID",type:"Ascii"},33421:{name:"CFARepeatPatternDim",type:"Short"},33422:{name:"CFAPattern",type:"Byte"},33423:{name:"BatteryLevel",type:"Rational"},33432:{name:"Copyright",type:"Ascii"},33434:{name:"ExposureTime",type:"Rational"},34377:{name:"ImageResources",type:"Byte"},34665:{name:"ExifTag",type:"Long"},34675:{name:"InterColorProfile",type:"Undefined"},34853:{name:"GPSTag",type:"Long"},34857:{name:"Interlace",type:"Short"},34858:{name:"TimeZoneOffset",type:"Long"},34859:{name:"SelfTimerMode",type:"Short"},37387:{name:"FlashEnergy",type:"Rational"},37388:{name:"SpatialFrequencyResponse",type:"Undefined"},37389:{name:"Noise",type:"Undefined"},37390:{name:"FocalPlaneXResolution",type:"Rational"},37391:{name:"FocalPlaneYResolution",type:"Rational"},37392:{name:"FocalPlaneResolutionUnit",type:"Short"},37393:{name:"ImageNumber",type:"Long"},37394:{name:"SecurityClassification",type:"Ascii"},37395:{name:"ImageHistory",type:"Ascii"},37397:{name:"ExposureIndex",type:"Rational"},37398:{name:"TIFFEPStandardID",type:"Byte"},37399:{name:"SensingMethod",type:"Short"},40091:{name:"XPTitle",type:"Byte"},40092:{name:"XPComment",type:"Byte"},40093:{name:"XPAuthor",type:"Byte"},40094:{name:"XPKeywords",type:"Byte"},40095:{name:"XPSubject",type:"Byte"},50341:{name:"PrintImageMatching",type:"Undefined"},50706:{name:"DNGVersion",type:"Byte"},50707:{name:"DNGBackwardVersion",type:"Byte"},50708:{name:"UniqueCameraModel",type:"Ascii"},50709:{name:"LocalizedCameraModel",type:"Byte"},50710:{name:"CFAPlaneColor",type:"Byte"},50711:{name:"CFALayout",type:"Short"},50712:{name:"LinearizationTable",type:"Short"},50713:{name:"BlackLevelRepeatDim",type:"Short"},50714:{name:"BlackLevel",type:"Rational"},50715:{name:"BlackLevelDeltaH",type:"SRational"},50716:{name:"BlackLevelDeltaV",type:"SRational"},50717:{name:"WhiteLevel",type:"Short"},50718:{name:"DefaultScale",type:"Rational"},50719:{name:"DefaultCropOrigin",type:"Short"},50720:{name:"DefaultCropSize",type:"Short"},50721:{name:"ColorMatrix1",type:"SRational"},50722:{name:"ColorMatrix2",type:"SRational"},50723:{name:"CameraCalibration1",type:"SRational"},50724:{name:"CameraCalibration2",type:"SRational"},50725:{name:"ReductionMatrix1",type:"SRational"},50726:{name:"ReductionMatrix2",type:"SRational"},50727:{name:"AnalogBalance",type:"Rational"},50728:{name:"AsShotNeutral",type:"Short"},50729:{name:"AsShotWhiteXY",type:"Rational"},50730:{name:"BaselineExposure",type:"SRational"},50731:{name:"BaselineNoise",type:"Rational"},50732:{name:"BaselineSharpness",type:"Rational"},50733:{name:"BayerGreenSplit",type:"Long"},50734:{name:"LinearResponseLimit",type:"Rational"},50735:{name:"CameraSerialNumber",type:"Ascii"},50736:{name:"LensInfo",type:"Rational"},50737:{name:"ChromaBlurRadius",type:"Rational"},50738:{name:"AntiAliasStrength",type:"Rational"},50739:{name:"ShadowScale",type:"SRational"},50740:{name:"DNGPrivateData",type:"Byte"},50741:{name:"MakerNoteSafety",type:"Short"},50778:{name:"CalibrationIlluminant1",type:"Short"},50779:{name:"CalibrationIlluminant2",type:"Short"},50780:{name:"BestQualityScale",type:"Rational"},50781:{name:"RawDataUniqueID",type:"Byte"},50827:{name:"OriginalRawFileName",type:"Byte"},50828:{name:"OriginalRawFileData",type:"Undefined"},50829:{name:"ActiveArea",type:"Short"},50830:{name:"MaskedAreas",type:"Short"},50831:{name:"AsShotICCProfile",type:"Undefined"},50832:{name:"AsShotPreProfileMatrix",type:"SRational"},50833:{name:"CurrentICCProfile",type:"Undefined"},50834:{name:"CurrentPreProfileMatrix",type:"SRational"},50879:{name:"ColorimetricReference",type:"Short"},50931:{name:"CameraCalibrationSignature",type:"Byte"},50932:{name:"ProfileCalibrationSignature",type:"Byte"},50934:{name:"AsShotProfileName",type:"Byte"},50935:{name:"NoiseReductionApplied",type:"Rational"},50936:{name:"ProfileName",type:"Byte"},50937:{name:"ProfileHueSatMapDims",type:"Long"},50938:{name:"ProfileHueSatMapData1",type:"Float"},50939:{name:"ProfileHueSatMapData2",type:"Float"},50940:{name:"ProfileToneCurve",type:"Float"},50941:{name:"ProfileEmbedPolicy",type:"Long"},50942:{name:"ProfileCopyright",type:"Byte"},50964:{name:"ForwardMatrix1",type:"SRational"},50965:{name:"ForwardMatrix2",type:"SRational"},50966:{name:"PreviewApplicationName",type:"Byte"},50967:{name:"PreviewApplicationVersion",type:"Byte"},50968:{name:"PreviewSettingsName",type:"Byte"},50969:{name:"PreviewSettingsDigest",type:"Byte"},50970:{name:"PreviewColorSpace",type:"Long"},50971:{name:"PreviewDateTime",type:"Ascii"},50972:{name:"RawImageDigest",type:"Undefined"},50973:{name:"OriginalRawFileDigest",type:"Undefined"},50974:{name:"SubTileBlockSize",type:"Long"},50975:{name:"RowInterleaveFactor",type:"Long"},50981:{name:"ProfileLookTableDims",type:"Long"},50982:{name:"ProfileLookTableData",type:"Float"},51008:{name:"OpcodeList1",type:"Undefined"},51009:{name:"OpcodeList2",type:"Undefined"},51022:{name:"OpcodeList3",type:"Undefined"}},Exif:{33434:{name:"ExposureTime",type:"Rational"},33437:{name:"FNumber",type:"Rational"},34850:{name:"ExposureProgram",type:"Short"},34852:{name:"SpectralSensitivity",type:"Ascii"},34855:{name:"ISOSpeedRatings",type:"Short"},34856:{name:"OECF",type:"Undefined"},34864:{name:"SensitivityType",type:"Short"},34865:{name:"StandardOutputSensitivity",type:"Long"},34866:{name:"RecommendedExposureIndex",type:"Long"},34867:{name:"ISOSpeed",type:"Long"},34868:{name:"ISOSpeedLatitudeyyy",type:"Long"},34869:{name:"ISOSpeedLatitudezzz",type:"Long"},36864:{name:"ExifVersion",type:"Undefined"},36867:{name:"DateTimeOriginal",type:"Ascii"},36868:{name:"DateTimeDigitized",type:"Ascii"},37121:{name:"ComponentsConfiguration",type:"Undefined"},37122:{name:"CompressedBitsPerPixel",type:"Rational"},37377:{name:"ShutterSpeedValue",type:"SRational"},37378:{name:"ApertureValue",type:"Rational"},37379:{name:"BrightnessValue",type:"SRational"},37380:{name:"ExposureBiasValue",type:"SRational"},37381:{name:"MaxApertureValue",type:"Rational"},37382:{name:"SubjectDistance",type:"Rational"},37383:{name:"MeteringMode",type:"Short"},37384:{name:"LightSource",type:"Short"},37385:{name:"Flash",type:"Short"},37386:{name:"FocalLength",type:"Rational"},37396:{name:"SubjectArea",type:"Short"},37500:{name:"MakerNote",type:"Undefined"},37510:{name:"UserComment",type:"Ascii"},37520:{name:"SubSecTime",type:"Ascii"},37521:{name:"SubSecTimeOriginal",type:"Ascii"},37522:{name:"SubSecTimeDigitized",type:"Ascii"},40960:{name:"FlashpixVersion",type:"Undefined"},40961:{name:"ColorSpace",type:"Short"},40962:{name:"PixelXDimension",type:"Long"},40963:{name:"PixelYDimension",type:"Long"},40964:{name:"RelatedSoundFile",type:"Ascii"},40965:{name:"InteroperabilityTag",type:"Long"},41483:{name:"FlashEnergy",type:"Rational"},41484:{name:"SpatialFrequencyResponse",type:"Undefined"},41486:{name:"FocalPlaneXResolution",type:"Rational"},41487:{name:"FocalPlaneYResolution",type:"Rational"},41488:{name:"FocalPlaneResolutionUnit",type:"Short"},41492:{name:"SubjectLocation",type:"Short"},41493:{name:"ExposureIndex",type:"Rational"},41495:{name:"SensingMethod",type:"Short"},41728:{name:"FileSource",type:"Undefined"},41729:{name:"SceneType",type:"Undefined"},41730:{name:"CFAPattern",type:"Undefined"},41985:{name:"CustomRendered",type:"Short"},41986:{name:"ExposureMode",type:"Short"},41987:{name:"WhiteBalance",type:"Short"},41988:{name:"DigitalZoomRatio",type:"Rational"},41989:{name:"FocalLengthIn35mmFilm",type:"Short"},41990:{name:"SceneCaptureType",type:"Short"},41991:{name:"GainControl",type:"Short"},41992:{name:"Contrast",type:"Short"},41993:{name:"Saturation",type:"Short"},41994:{name:"Sharpness",type:"Short"},41995:{name:"DeviceSettingDescription",type:"Undefined"},41996:{name:"SubjectDistanceRange",type:"Short"},42016:{name:"ImageUniqueID",type:"Ascii"},42032:{name:"CameraOwnerName",type:"Ascii"},42033:{name:"BodySerialNumber",type:"Ascii"},42034:{name:"LensSpecification",type:"Rational"},42035:{name:"LensMake",type:"Ascii"},42036:{name:"LensModel",type:"Ascii"},42037:{name:"LensSerialNumber",type:"Ascii"},42240:{name:"Gamma",type:"Rational"}},GPS:{0:{name:"GPSVersionID",type:"Byte"},1:{name:"GPSLatitudeRef",type:"Ascii"},2:{name:"GPSLatitude",type:"Rational"},3:{name:"GPSLongitudeRef",type:"Ascii"},4:{name:"GPSLongitude",type:"Rational"},5:{name:"GPSAltitudeRef",type:"Byte"},6:{name:"GPSAltitude",type:"Rational"},7:{name:"GPSTimeStamp",type:"Rational"},8:{name:"GPSSatellites",type:"Ascii"},9:{name:"GPSStatus",type:"Ascii"},10:{name:"GPSMeasureMode",type:"Ascii"},11:{name:"GPSDOP",type:"Rational"},12:{name:"GPSSpeedRef",type:"Ascii"},13:{name:"GPSSpeed",type:"Rational"},14:{name:"GPSTrackRef",type:"Ascii"},15:{name:"GPSTrack",type:"Rational"},16:{name:"GPSImgDirectionRef",type:"Ascii"},17:{name:"GPSImgDirection",type:"Rational"},18:{name:"GPSMapDatum",type:"Ascii"},19:{name:"GPSDestLatitudeRef",type:"Ascii"},20:{name:"GPSDestLatitude",type:"Rational"},21:{name:"GPSDestLongitudeRef",type:"Ascii"},22:{name:"GPSDestLongitude",type:"Rational"},23:{name:"GPSDestBearingRef",type:"Ascii"},24:{name:"GPSDestBearing",type:"Rational"},25:{name:"GPSDestDistanceRef",type:"Ascii"},26:{name:"GPSDestDistance",type:"Rational"},27:{name:"GPSProcessingMethod",type:"Undefined"},28:{name:"GPSAreaInformation",type:"Undefined"},29:{name:"GPSDateStamp",type:"Ascii"},30:{name:"GPSDifferential",type:"Short"},31:{name:"GPSHPositioningError",type:"Rational"}},Interop:{1:{name:"InteroperabilityIndex",type:"Ascii"}}};P["0th"]=P.Image,P["1st"]=P.Image,d.TAGS=P,d.ImageIFD={ProcessingSoftware:11,NewSubfileType:254,SubfileType:255,ImageWidth:256,ImageLength:257,BitsPerSample:258,Compression:259,PhotometricInterpretation:262,Threshholding:263,CellWidth:264,CellLength:265,FillOrder:266,DocumentName:269,ImageDescription:270,Make:271,Model:272,StripOffsets:273,Orientation:274,SamplesPerPixel:277,RowsPerStrip:278,StripByteCounts:279,XResolution:282,YResolution:283,PlanarConfiguration:284,GrayResponseUnit:290,GrayResponseCurve:291,T4Options:292,T6Options:293,ResolutionUnit:296,TransferFunction:301,Software:305,DateTime:306,Artist:315,HostComputer:316,Predictor:317,WhitePoint:318,PrimaryChromaticities:319,ColorMap:320,HalftoneHints:321,TileWidth:322,TileLength:323,TileOffsets:324,TileByteCounts:325,SubIFDs:330,InkSet:332,InkNames:333,NumberOfInks:334,DotRange:336,TargetPrinter:337,ExtraSamples:338,SampleFormat:339,SMinSampleValue:340,SMaxSampleValue:341,TransferRange:342,ClipPath:343,XClipPathUnits:344,YClipPathUnits:345,Indexed:346,JPEGTables:347,OPIProxy:351,JPEGProc:512,JPEGInterchangeFormat:513,JPEGInterchangeFormatLength:514,JPEGRestartInterval:515,JPEGLosslessPredictors:517,JPEGPointTransforms:518,JPEGQTables:519,JPEGDCTables:520,JPEGACTables:521,YCbCrCoefficients:529,YCbCrSubSampling:530,YCbCrPositioning:531,ReferenceBlackWhite:532,XMLPacket:700,Rating:18246,RatingPercent:18249,ImageID:32781,CFARepeatPatternDim:33421,CFAPattern:33422,BatteryLevel:33423,Copyright:33432,ExposureTime:33434,ImageResources:34377,ExifTag:34665,InterColorProfile:34675,GPSTag:34853,Interlace:34857,TimeZoneOffset:34858,SelfTimerMode:34859,FlashEnergy:37387,SpatialFrequencyResponse:37388,Noise:37389,FocalPlaneXResolution:37390,FocalPlaneYResolution:37391,FocalPlaneResolutionUnit:37392,ImageNumber:37393,SecurityClassification:37394,ImageHistory:37395,ExposureIndex:37397,TIFFEPStandardID:37398,SensingMethod:37399,XPTitle:40091,XPComment:40092,XPAuthor:40093,XPKeywords:40094,XPSubject:40095,PrintImageMatching:50341,DNGVersion:50706,DNGBackwardVersion:50707,UniqueCameraModel:50708,LocalizedCameraModel:50709,CFAPlaneColor:50710,CFALayout:50711,LinearizationTable:50712,BlackLevelRepeatDim:50713,BlackLevel:50714,BlackLevelDeltaH:50715,BlackLevelDeltaV:50716,WhiteLevel:50717,DefaultScale:50718,DefaultCropOrigin:50719,DefaultCropSize:50720,ColorMatrix1:50721,ColorMatrix2:50722,CameraCalibration1:50723,CameraCalibration2:50724,ReductionMatrix1:50725,ReductionMatrix2:50726,AnalogBalance:50727,AsShotNeutral:50728,AsShotWhiteXY:50729,BaselineExposure:50730,BaselineNoise:50731,BaselineSharpness:50732,BayerGreenSplit:50733,LinearResponseLimit:50734,CameraSerialNumber:50735,LensInfo:50736,ChromaBlurRadius:50737,AntiAliasStrength:50738,ShadowScale:50739,DNGPrivateData:50740,MakerNoteSafety:50741,CalibrationIlluminant1:50778,CalibrationIlluminant2:50779,BestQualityScale:50780,RawDataUniqueID:50781,OriginalRawFileName:50827,OriginalRawFileData:50828,ActiveArea:50829,MaskedAreas:50830,AsShotICCProfile:50831,AsShotPreProfileMatrix:50832,CurrentICCProfile:50833,CurrentPreProfileMatrix:50834,ColorimetricReference:50879,CameraCalibrationSignature:50931,ProfileCalibrationSignature:50932,AsShotProfileName:50934,NoiseReductionApplied:50935,ProfileName:50936,ProfileHueSatMapDims:50937,ProfileHueSatMapData1:50938,ProfileHueSatMapData2:50939,ProfileToneCurve:50940,ProfileEmbedPolicy:50941,ProfileCopyright:50942,ForwardMatrix1:50964,ForwardMatrix2:50965,PreviewApplicationName:50966,PreviewApplicationVersion:50967,PreviewSettingsName:50968,PreviewSettingsDigest:50969,PreviewColorSpace:50970,PreviewDateTime:50971,RawImageDigest:50972,OriginalRawFileDigest:50973,SubTileBlockSize:50974,RowInterleaveFactor:50975,ProfileLookTableDims:50981,ProfileLookTableData:50982,OpcodeList1:51008,OpcodeList2:51009,OpcodeList3:51022,NoiseProfile:51041},d.ExifIFD={ExposureTime:33434,FNumber:33437,ExposureProgram:34850,SpectralSensitivity:34852,ISOSpeedRatings:34855,OECF:34856,SensitivityType:34864,StandardOutputSensitivity:34865,RecommendedExposureIndex:34866,ISOSpeed:34867,ISOSpeedLatitudeyyy:34868,ISOSpeedLatitudezzz:34869,ExifVersion:36864,DateTimeOriginal:36867,DateTimeDigitized:36868,ComponentsConfiguration:37121,CompressedBitsPerPixel:37122,ShutterSpeedValue:37377,ApertureValue:37378,BrightnessValue:37379,ExposureBiasValue:37380,MaxApertureValue:37381,SubjectDistance:37382,MeteringMode:37383,LightSource:37384,Flash:37385,FocalLength:37386,SubjectArea:37396,MakerNote:37500,UserComment:37510,SubSecTime:37520,SubSecTimeOriginal:37521,SubSecTimeDigitized:37522,FlashpixVersion:40960,ColorSpace:40961,PixelXDimension:40962,PixelYDimension:40963,RelatedSoundFile:40964,InteroperabilityTag:40965,FlashEnergy:41483,SpatialFrequencyResponse:41484,FocalPlaneXResolution:41486,FocalPlaneYResolution:41487,FocalPlaneResolutionUnit:41488,SubjectLocation:41492,ExposureIndex:41493,SensingMethod:41495,FileSource:41728,SceneType:41729,CFAPattern:41730,CustomRendered:41985,ExposureMode:41986,WhiteBalance:41987,DigitalZoomRatio:41988,FocalLengthIn35mmFilm:41989,SceneCaptureType:41990,GainControl:41991,Contrast:41992,Saturation:41993,Sharpness:41994,DeviceSettingDescription:41995,SubjectDistanceRange:41996,ImageUniqueID:42016,CameraOwnerName:42032,BodySerialNumber:42033,LensSpecification:42034,LensMake:42035,LensModel:42036,LensSerialNumber:42037,Gamma:42240},d.GPSIFD={GPSVersionID:0,GPSLatitudeRef:1,GPSLatitude:2,GPSLongitudeRef:3,GPSLongitude:4,GPSAltitudeRef:5,GPSAltitude:6,GPSTimeStamp:7,GPSSatellites:8,GPSStatus:9,GPSMeasureMode:10,GPSDOP:11,GPSSpeedRef:12,GPSSpeed:13,GPSTrackRef:14,GPSTrack:15,GPSImgDirectionRef:16,GPSImgDirection:17,GPSMapDatum:18,GPSDestLatitudeRef:19,GPSDestLatitude:20,GPSDestLongitudeRef:21,GPSDestLongitude:22,GPSDestBearingRef:23,GPSDestBearing:24,GPSDestDistanceRef:25,GPSDestDistance:26,GPSProcessingMethod:27,GPSAreaInformation:28,GPSDateStamp:29,GPSDifferential:30,GPSHPositioningError:31},d.InteropIFD={InteroperabilityIndex:1},void 0!==e&&e.exports&&(t=e.exports=d),t.piexif=d}()},function(e,t,n){"use strict";function i(e){if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){if("function"!=typeof r.value)throw new TypeError("Middleware must be composed of functions!")}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}return function(t,n){function i(o){if(o<=r)return a.reject(new Error("next() called multiple times"));r=o;var l=e[o]||n;if(!l)return a.resolve();try{return a.resolve(l(t,function(){return i(o+1)}))}catch(e){return a.reject(e)}}var r=-1;return i(0)}}var a=n(3);e.exports=i}]);